<%- include('partials/header') %>

<div class="container mt-2">
  <h4>Analytics and History</h4>
  <% if (locals.urls && locals.urls.length > 0) { %>
  <table class="table table-striped table-bordered mt-3">
    <thead class="table-warning">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Short URL</th>
        <th scope="col">Original URL</th>
        <th scope="col">Clicks</th>
      </tr>
    </thead>
    <tbody>
      <% urls.forEach((url, index) => { %>
      <tr>
        <th scope="row"><%= index + 1 %></th>
        <td>
          <a href="<%= `http://localhost:3000/url/${url.shortID}` %>"
            ><%= `http://localhost:3000/url/${url.shortID}` %></a
          >
        </td>
        <td><%= url.redirectURL %></td>
        <td><%= url.visitHistory.length %></td>
      </tr>
      <% }) %>
    </tbody>
  </table>
  <% } else { %>
  <p class="text-center mt-4">No URLs available.</p>
  <% } %>
</div>

<%- include('partials/footer') %>
